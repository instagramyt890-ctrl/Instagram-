<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SECURETOOLS.IO — Secure UPI Checkout</title>
  <meta name="theme-color" content="#071022">
  <style>
    :root{
      --accent:#ff6b6b;--accent-2:#ff914d;--bg-1:#071022;--bg-2:#0b1220;--muted:#9aa4b2;
      font-family:Inter,system-ui,Arial,sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#e6eef6}
    main{max-width:980px;margin:18px auto;padding:18px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:22px;letter-spacing:3px;background:linear-gradient(90deg,#fff,#cfe8ff);-webkit-background-clip:text;color:transparent;text-transform:uppercase}
    .subtitle{font-size:13px;color:var(--muted)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.6);margin-top:14px}
    .hidden{display:none}
    .services ul{list-style:none;padding:0;margin:0;display:grid;gap:10px}
    .services li{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
    .btn{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
    .btn-ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px}
    .tiny{font-size:13px;color:var(--muted)}
    label{display:block;margin-top:8px;font-size:13px;color:var(--muted)}
    input[type="tel"],input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#e6eef6;margin-top:6px;font-size:15px}
    .row{display:flex;gap:8px;margin-top:12px}
    .row .btn{flex:1}
    .pay-grid{display:flex;gap:12px;justify-content:center;margin-top:12px;flex-wrap:wrap}
    .pay-card{width:120px;padding:12px;border-radius:12px;background:linear-gradient(180deg,#071d2b,#04202a);display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;border:2px solid transparent}
    .pay-card.selected{border-color:rgba(255,107,107,0.28);transform:translateY(-6px)}
    .qr{width:240px;height:240px;border-radius:8px;display:block}
    .small-note{font-size:12px;color:#b7c8d9;margin-top:8px;text-align:center}
    .muted-inline{color:var(--muted);font-size:13px}
    footer{margin-top:40px;text-align:center;color:var(--muted);font-size:12px}
    @media(max-width:520px){
      .pay-card{width:92px;padding:8px}
      .qr{width:180px;height:180px}
      .row{flex-direction:column}
    }
  </style>
</head>
<body>
  <main>
    <header>
      <div>
        <h1>SECURETOOLS.IO</h1>
        <div class="subtitle">ethical security • audit • awareness</div>
      </div>
      <div class="tiny">INTERNATIONAL IP</div>
    </header>

    <!-- SERVICES -->
    <section id="page-services" class="card" role="region" aria-label="Service selection">
      <h2>Services</h2>
      <p class="tiny">All services are legal, ethical and for awareness / professional security.</p>
      <ul id="svcList">
        <li>
          <div><strong>Instagram account security audit</strong><div class="tiny">— quick review & recommendations</div></div>
          <div style="display:flex;gap:8px;align-items:center"><span class="tiny">₹249</span><button class="btn btn-primary" data-svc="Instagram account security audit|249">Buy</button></div>
        </li>
        <li>
          <div><strong>Facebook account tool hardening</strong><div class="tiny">— privacy & login hardening</div></div>
          <div style="display:flex;gap:8px;align-items:center"><span class="tiny">₹249</span><button class="btn btn-primary" data-svc="Facebook account tool hardening|249">Buy</button></div>
        </li>
        <li>
          <div><strong>WhatsApp account tool</strong><div class="tiny">— personal & group privacy tips</div></div>
          <div style="display:flex;gap:8px;align-items:center"><span class="tiny">₹249</span><button class="btn btn-primary" data-svc="WhatsApp account tool|249">Buy</button></div>
        </li>
        <li>
          <div><strong>Call recording account tool</strong><div class="tiny">— legal & ethical guidance</div></div>
          <div style="display:flex;gap:8px;align-items:center"><span class="tiny">₹249</span><button class="btn btn-primary" data-svc="Call recording account tool|249">Buy</button></div>
        </li>
        <li>
          <div><strong>Phishing io tool</strong><div class="tiny">— simulated phishing & lessons</div></div>
          <div style="display:flex;gap:8px;align-items:center"><span class="tiny">₹249</span><button class="btn btn-primary" data-svc="Phishing io tool|249">Buy</button></div>
        </li>
      </ul>
    </section>

    <!-- CHECKOUT -->
    <section id="page-checkout" class="card hidden" role="region" aria-label="Checkout details">
      <h2>Checkout</h2>
      <div id="chosenSvc" class="tiny">— service not selected —</div>
      <label for="mobile">Mobile number (contact)</label>
      <input type="tel" id="mobile" placeholder="91xxxxxxxxxx" inputmode="numeric" pattern="[0-9]{10}" maxlength="10" required>
      <label for="buyerName">Your name (optional)</label>
      <input type="text" id="buyerName" placeholder="Your name">
      <div class="row">
        <button class="btn btn-ghost" id="btn-back-to-services">Back</button>
        <button class="btn btn-primary" id="btn-proceed">Proceed to Pay</button>
      </div>
      <div class="small-note">Next: Choose UPI app or scan QR on the following screen. Amount will be pre-filled in UPI app.</div>
    </section>

    <!-- PAYMENT -->
    <section id="page-payment" class="card hidden" role="region" aria-label="UPI payment">
      <h2>UPI Payment</h2>
      <div id="payIntro" class="tiny">Select a payment app then tap "Pay Now".</div>
      <div class="pay-row">
        <div class="pay-grid" id="payGrid" role="list">
          <div class="pay-card" data-app="gpay"><div class="tiny">Google Pay</div></div>
          <div class="pay-card" data-app="phonepe"><div class="tiny">PhonePe</div></div>
          <div class="pay-card" data-app="upi"><div class="tiny">Other UPI</div></div>
        </div>

        <div style="width:100%;display:flex;justify-content:center;margin-top:12px;">
          <button id="payNowBtn" class="btn btn-primary hidden">Pay Now</button>
        </div>

        <div class="qr-wrap" aria-live="polite" style="margin-top:12px;display:flex;flex-direction:column;align-items:center;gap:8px">
          <div style="padding:8px;border-radius:12px;background:linear-gradient(180deg,#071d2b,#04202a)"><img id="qrimg" class="qr" src="" alt="QR code for secure UPI payment" loading="lazy"></div>
          <div id="payLine" class="small-note">Please scan the QR or use Pay Now.</div>
          <div class="small-note">UPI ID: <strong id="upiText" class="muted-inline">—</strong> • Payee: <strong>SECURETOOLS.IO</strong></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button id="btn-download-qr" class="btn btn-ghost">Download QR</button>
            <button id="btn-back-to-checkout" class="btn btn-ghost">Back</button>
          </div>
        </div>
      </div>
    </section>

    <footer>© <span id="year"></span> SECURETOOLS.IO — support: <a href="mailto:support@securetools.io">support@securetools.io</a></footer>
  </main>

  <script>
    // ---------- CONFIG ----------
    const ENC_UPI = 'ODk1NTMzNzQxMEB5Ymw='; // base64('8955337410@ybl')
    const PAYEE_NAME = 'SECURETOOLS.IO';
    const PKG_GPAY = 'com.google.android.apps.nbu.paisa.user';
    const PKG_PHONEPE = 'com.phonepe.app';

    // ---------- STATE ----------
    const state = { selectedSvc: null, buyer: null, selectedApp: null, lastQrDataUrl: null };

    // ---------- DOM refs ----------
    const pages = ['services','checkout','payment'];
    const el = {
      services: document.getElementById('page-services'),
      checkout: document.getElementById('page-checkout'),
      payment: document.getElementById('page-payment'),
      svcList: document.getElementById('svcList'),
      chosenSvc: document.getElementById('chosenSvc'),
      mobile: document.getElementById('mobile'),
      buyerName: document.getElementById('buyerName'),
      btnBackToServices: document.getElementById('btn-back-to-services'),
      btnProceed: document.getElementById('btn-proceed'),
      payGrid: document.getElementById('payGrid'),
      payCards: () => Array.from(document.querySelectorAll('.pay-card')),
      payIntro: document.getElementById('payIntro'),
      payNowBtn: document.getElementById('payNowBtn'),
      qrimg: document.getElementById('qrimg'),
      upiText: document.getElementById('upiText'),
      payLine: document.getElementById('payLine'),
      btnDownloadQr: document.getElementById('btn-download-qr'),
      btnBackToCheckout: document.getElementById('btn-back-to-checkout'),
      year: document.getElementById('year')
    };

    // ---------- Helpers ----------
    function goTo(page){
      el.services.classList.add('hidden');
      el.checkout.classList.add('hidden');
      el.payment.classList.add('hidden');
      if(page === 'services') el.services.classList.remove('hidden');
      if(page === 'checkout') el.checkout.classList.remove('hidden');
      if(page === 'payment') el.payment.classList.remove('hidden');
      window.scrollTo({top:0,behavior:'smooth'});
    }
    function decodeUpi(){
      try{ return atob(ENC_UPI); } catch(e){ return '— invalid-upi-encoding —'; }
    }
    function sanitizePrice(price){ const n = parseFloat(price); return isNaN(n) ? '' : Math.round(n).toString(); }
    function buildUpiUri(){
      const svc = state.selectedSvc || '';
      const amt = sanitizePrice((svc.split('|')[1]||'').trim());
      let uri = 'upi://pay?pa='+encodeURIComponent(decodeUpi())+'&pn='+encodeURIComponent(PAYEE_NAME)+'&cu=INR';
      if(amt) uri += '&am='+encodeURIComponent(amt);
      if(state.buyer && state.buyer.mobile) uri += '&tn='+encodeURIComponent('Order from '+state.buyer.mobile);
      return uri;
    }
    function qrImageUrl(uri, size=440){ return 'https://api.qrserver.com/v1/create-qr-code/?size='+size+'x'+size+'&data='+encodeURIComponent(uri); }

    // ---------- UI actions ----------
    function selectService(svcStr){
      state.selectedSvc = svcStr;
      const [name,price] = svcStr.split('|');
      el.chosenSvc.textContent = name + ' • ₹' + price;
      goTo('checkout');
      setTimeout(()=> el.mobile.focus(),200);
    }

    function clearAppSelectionUI(){
      el.payCards().forEach(c => { c.classList.remove('selected'); c.setAttribute('aria-pressed','false'); });
    }

    function generateAndShowQr(){
      const uri = buildUpiUri();
      const imgsrc = qrImageUrl(uri,520)+'&t='+Date.now();
      el.qrimg.src = imgsrc;
      const [name,price] = (state.selectedSvc||'').split('|');
      el.payLine.textContent = (name ? name+' — ₹'+price : 'Please scan the QR or use Pay Now.');
      el.upiText.textContent = decodeUpi();
      // try to cache dataURL
      el.qrimg.onload = async () => {
        try{
          const resp = await fetch(el.qrimg.src);
          const blob = await resp.blob();
          const reader = new FileReader();
          reader.onload = () => { state.lastQrDataUrl = reader.result; };
          reader.readAsDataURL(blob);
        }catch(e){}
      };
    }

    // ---------- Event wiring ----------
    document.addEventListener('DOMContentLoaded', () => {
      // start on services
      goTo('services');
      el.year.textContent = new Date().getFullYear();
      el.upiText.textContent = decodeUpi();
    });

    // service buttons
    document.body.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-svc]');
      if(btn){
        selectService(btn.getAttribute('data-svc'));
        return;
      }
    });

    el.btnBackToServices.addEventListener('click', () => {
      state.selectedSvc = null; state.buyer = null; state.selectedApp = null; state.lastQrDataUrl = null;
      el.mobile.value = ''; el.buyerName.value = ''; el.chosenSvc.textContent = '— service not selected —';
      clearAppSelectionUI();
      goTo('services');
    });

    el.btnBackToCheckout.addEventListener('click', () => {
      goTo('checkout');
    });

    el.btnProceed.addEventListener('click', () => {
      if(!state.selectedSvc){ alert('कृपया पहले कोई सर्विस चुनें।'); return; }
      const mob = el.mobile.value.trim();
      if(!/^[0-9]{10}$/.test(mob)){ alert('कृपया वैध 10 अंकों का मोबाइल नंबर डालें।'); el.mobile.focus(); return; }
      state.buyer = { name: el.buyerName.value.trim(), mobile: mob };
      state.selectedApp = null;
      clearAppSelectionUI();
      el.payNowBtn.classList.add('hidden');
      generateAndShowQr();
      goTo('payment');
    });

    // pay-card selection
    document.getElementById('payGrid').addEventListener('click', (e) => {
      const card = e.target.closest('.pay-card');
      if(!card) return;
      clearAppSelectionUI();
      card.classList.add('selected');
      state.selectedApp = card.getAttribute('data-app');
      const price = (state.selectedSvc||'').split('|')[1] || '';
      const label = state.selectedApp === 'gpay' ? 'Google Pay' : state.selectedApp === 'phonepe' ? 'PhonePe' : 'Other UPI';
      el.payIntro.textContent = 'Selected: ' + label + (price ? ' • ₹'+price : '');
      el.payNowBtn.classList.remove('hidden');
    });

    function intentForPackage(pkg){
      const upi = buildUpiUri();
      const payload = upi.replace('upi://','');
      return 'intent://'+payload+'#Intent;scheme=upi;package='+pkg+';end';
    }

    el.payNowBtn.addEventListener('click', () => {
      if(!state.selectedApp){ alert('कृपया पेमेंट ऐप चुनें।'); return; }
      if(state.selectedApp === 'gpay'){
        window.location.href = intentForPackage(PKG_GPAY);
        setTimeout(()=>{ window.location.href = buildUpiUri(); }, 900);
      } else if(state.selectedApp === 'phonepe'){
        window.location.href = intentForPackage(PKG_PHONEPE);
        setTimeout(()=>{ window.location.href = buildUpiUri(); }, 900);
      } else {
        window.location.href = buildUpiUri();
      }
    });

    el.btnDownloadQr.addEventListener('click', () => {
      if(state.lastQrDataUrl){
        const a = document.createElement('a'); a.href = state.lastQrDataUrl; a.download = 'securetools-upi-qr.png'; document.body.appendChild(a); a.click(); a.remove();
      } else if(el.qrimg.src){ window.open(el.qrimg.src, '_blank'); }
      else { alert('QR अभी उपलब्ध नहीं है — कृपया पहले पेमेंट स्क्रीन पर आएँ।'); }
    });

    // ESC resets
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        state.selectedSvc = null; state.buyer = null; state.selectedApp = null; state.lastQrDataUrl = null;
        el.mobile.value = ''; el.buyerName.value = ''; el.chosenSvc.textContent = '— service not selected —';
        clearAppSelectionUI();
        el.payNowBtn.classList.add('hidden');
        el.upiText.textContent = decodeUpi();
        goTo('services');
      }
    });
  </script>
</body>
</html>
