<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SECURETOOLS.IO — Ethical Cybersecurity Services</title>
  <meta name="description" content="SECURETOOLS.IO — Ethical cybersecurity services. Book audits, workshops & training. Pay via Razorpay or direct UPI." />
  <style>
    :root{
      --accent:#ff6b6b;
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#9aa4b2;
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, system-ui, Arial, sans-serif;
    }
    html,body{height:100%; margin:0; background:linear-gradient(180deg,#071022 0%, #0b1220 100%); color:#e6eef6}
    .wrap{max-width:980px; margin:28px auto; padding:24px;}
    header{display:flex;align-items:center;justify-content:space-between; gap:16px}
    h1{margin:0; letter-spacing:4px; font-size:28px;
      background: linear-gradient(90deg,#fff,#cfe8ff);
      -webkit-background-clip:text; background-clip:text; color:transparent; text-transform:uppercase;}
    .subtitle{font-size:12px;color:var(--muted); text-transform:lowercase;}
    .hero{display:grid; grid-template-columns: 1fr 340px; gap:20px; margin-top:18px;}
    .card{background:var(--card); padding:20px; border-radius:12px; box-shadow: 0 6px 18px rgba(2,6,23,0.6);}
    .services ul{list-style:none;padding:0;margin:0; display:grid; gap:8px}
    .services li{display:flex; align-items:center; justify-content:space-between; padding:10px; border-radius:8px; background:var(--glass); font-size:14px}
    .small{font-size:12px;color:var(--muted)}
    .buy-wrap{display:flex; gap:10px; align-items:center; margin-top:14px}
    .btn{padding:10px 16px; border-radius:10px; cursor:pointer; border:0; font-weight:600; box-shadow: 0 6px 18px rgba(0,0,0,0.45);}
    .btn-primary{background:linear-gradient(90deg,var(--accent), #ff914d); color:#fff}
    .btn-ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03)}
    .highlight{background:#0b2338; padding:8px 12px; border-radius:8px; font-weight:700; color:#bfe6ff; border-left:3px solid rgba(191,230,255,0.12)}
    .small-note{font-size:12px;color:#b7c8d9;margin-top:10px}
    footer{margin-top:18px; font-size:12px; color:var(--muted); text-align:center}
    .panel{position:fixed; right:18px; bottom:18px; width:420px; background:linear-gradient(180deg,#071428, #071b2a); border-radius:12px; padding:16px; box-shadow:0 12px 38px rgba(2,6,23,0.6);}
    .step{display:none}
    .step.active{display:block}
    .field{display:flex; flex-direction:column; gap:6px; margin-bottom:12px}
    input[type="text"], input[type="tel"]{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04); background:transparent; color:#e6eef6; outline:none;font-size:14px;}
    .price-row{display:flex; justify-content:space-between; align-items:center; margin:8px 0}
    .terms{font-size:11px; color:#9fb0c6; margin-top:12px}
    .tiny-hint{font-size:11px;color:#8ea0b6}
    .upi-box{display:flex; gap:12px; align-items:center; padding:10px; border-radius:8px; background:linear-gradient(180deg,#071d2b,#071928); margin-top:8px}
    @media (max-width:900px){ .hero{grid-template-columns:1fr; } .panel{left:12px; right:12px; width:auto} }
    .services li:hover{transform:translateY(-3px); transition:all .18s ease; box-shadow: 0 8px 22px rgba(0,0,0,0.45)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>SECURETOOLS.IO</h1>
        <div class="subtitle">ethical security • audit • awareness</div>
      </div>
      <div class="highlight">INTERNATIONAL IP</div>
    </header>

    <section class="hero" aria-labelledby="services-title">
      <div class="card services" id="services-title">
        <h2 style="margin-top:0">Services</h2>
        <p class="small">नोट: यह एक कानूनी, शैक्षिक पेज है — किसी भी अवैध गतिविधि के लिए उपयोग न करें।</p>
        <ul>
          <li><span>Instagram account security audit</span><button class="btn btn-ghost" data-service="Instagram audit" data-price="199">Buy — ₹199</button></li>
          <li><span>Facebook account hardening</span><button class="btn btn-ghost" data-service="Facebook audit" data-price="209">Buy — ₹209</button></li>
          <li><span>WhatsApp privacy workshop</span><button class="btn btn-ghost" data-service="WhatsApp workshop" data-price="299">Buy — ₹299</button></li>
          <li><span>Call recording compliance review</span><button class="btn btn-ghost" data-service="Call recording review" data-price="699">Buy — ₹699</button></li>
          <li><span>Phishing awareness training (educational)</span><button class="btn btn-ghost" data-service="Phishing training" data-price="149">Buy — ₹149</button></li>
          <li><span>Snapchat account security audit</span><button class="btn btn-ghost" data-service="Snapchat audit" data-price="299">Buy — ₹299</button></li>
          <li><span>Gmail account hardening</span><button class="btn btn-ghost" data-service="Gmail hardening" data-price="189">Buy — ₹189</button></li>
        </ul>

        <div class="buy-wrap">
          <div style="flex:1">
            <div class="small-note">Quick action</div>
            <div style="margin-top:8px">
              <button class="btn btn-primary" id="open-panel">Buy Selected Service</button>
            </div>
          </div>
          <div style="width:140px; text-align:center">
            <div class="small" style="margin-bottom:6px">Verified</div>
            <div style="padding:8px; border-radius:8px; background:linear-gradient(180deg,#071428,#051223); font-size:13px">Secure</div>
          </div>
        </div>

        <div class="terms">
          <strong>Terms &amp; Conditions:</strong>
          <div style="margin-top:6px; font-size:12px; color:#9fb0c6">
            यह सेवा केवल कानूनी और नैतिक सुरक्षा परीक्षण, प्रशिक्षण और परामर्श के लिए है। किसी भी अवैध गतिविधि हेतु उपयोग करना अपराध है। आप सेवा का दुरुपयोग नहीं करेंगे।
          </div>
        </div>
      </div>

      <aside class="card">
        <h3 style="margin-top:0">Order Summary</h3>
        <div class="small">Selected service:</div>
        <div id="selected-service" style="font-weight:700; margin:8px 0">— कोई चयन नहीं —</div>
        <div class="price-row"><div class="small">Price</div><div id="selected-price" style="font-weight:800">—</div></div>
        <div class="small-note">Pay via Razorpay or direct UPI to <strong>8955337410@ybl</strong></div>

        <div style="margin-top:14px">
          <button class="btn btn-primary" id="checkout-inline">Proceed to Checkout</button>
        </div>
      </aside>
    </section>

    <footer>
      © <span id="year"></span> SECURETOOLS.IO — All rights reserved • <span class="small">In हिन्दी: यह केवल शैक्षिक पृष्ठ है।</span>
    </footer>
  </div>

  <!-- Checkout panel -->
  <div class="panel" role="dialog" aria-modal="true" aria-label="Checkout panel">
    <div id="step-1" class="step active">
      <h4 style="margin:0 0 8px 0">Step 1 — Select service</h4>
      <div class="field">
        <label class="tiny-hint">Choose service</label>
        <select id="service-select">
          <option value="">-- select --</option>
          <option value="Instagram account security audit|199">Instagram account security audit — ₹199</option>
          <option value="Facebook account hardening|209">Facebook account hardening — ₹209</option>
          <option value="WhatsApp privacy workshop|299">WhatsApp privacy workshop — ₹299</option>
          <option value="Call recording compliance review|699">Call recording compliance review — ₹699</option>
          <option value="Phishing awareness training|149">Phishing awareness training — ₹149</option>
          <option value="Snapchat account security audit|299">Snapchat account security audit — ₹299</option>
          <option value="Gmail account hardening|189">Gmail account hardening — ₹189</option>
        </select>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="btn btn-ghost" id="cancel-1">Cancel</button>
        <button class="btn btn-primary" id="to-step-2">Next</button>
      </div>
    </div>

    <div id="step-2" class="step">
      <h4 style="margin:0 0 8px 0">Step 2 — Contact (mobile)</h4>
      <div class="field">
        <label class="tiny-hint">Mobile number (for order contact)</label>
        <input type="tel" id="mobile" placeholder="Enter mobile number — e.g. 91xxxxxxxxxx" />
        <div class="tiny-hint">हम यह नंबर केवल वेरिफाइ और संपर्क के लिए उपयोग करेंगे।</div>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="btn btn-ghost" id="back-2">Back</button>
        <button class="btn btn-primary" id="to-step-3">Next</button>
      </div>
    </div>

    <div id="step-3" class="step">
      <h4 style="margin:0 0 8px 0">Step 3 — Review & Pay</h4>
      <div class="field">
        <div class="small">Service</div>
        <div id="rev-service" style="font-weight:700">—</div>
      </div>
      <div class="field">
        <div class="small">Amount</div>
        <div id="rev-amount" style="font-weight:800">—</div>
      </div>

      <div style="margin-top:8px">
        <div class="small">Payment options</div>

        <!-- Razorpay pay -->
        <div style="margin-top:8px; padding:12px; border-radius:8px; background:#071d2b;">
          <div class="tiny-hint">Secure checkout via Razorpay (card/UPI/netbanking). Click below to open Razorpay.</div>
          <div style="margin-top:8px">
            <button class="btn btn-primary" id="pay-now-razor">Pay via Razorpay</button>
          </div>
        </div>

        <!-- Direct UPI pay -->
        <div style="margin-top:12px">
          <div class="tiny-hint">Direct UPI — pay instantly to</div>
          <div class="upi-box">
            <div style="flex:1">
              <div style="font-weight:700">8955337410@ybl</div>
              <div class="small" style="margin-top:6px">Pay from any UPI app (GPay, PhonePe, BHIM, Paytm etc.)</div>
            </div>
            <div style="text-align:center">
              <button class="btn btn-ghost" id="open-upi-intent">Pay with UPI</button>
            </div>
          </div>

          <div id="upi-qr-wrap" style="margin-top:10px; display:none; align-items:center; gap:12px">
            <div style="padding:8px; border-radius:8px; background:#061821; display:inline-block">
              <img id="upi-qr" src="" width="160" height="160" alt="UPI QR"/>
            </div>
            <div style="flex:1">
              <div class="small">UPI Link</div>
              <input id="upi-link" type="text" readonly style="width:100%; padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:#e6eef6;"/>
              <div style="margin-top:8px; display:flex; gap:8px;">
                <button class="btn btn-primary" id="copy-upi">Copy UPI</button>
                <button class="btn btn-ghost" id="i-paid-upi">I have paid (enter txn id)</button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div style="display:flex; gap:8px; margin-top:12px;">
        <button class="btn btn-ghost" id="back-3">Back</button>
      </div>

      <div class="terms" style="margin-top:10px">
        By proceeding you confirm this is a legitimate, legal request. रसीद और पेमेंट डिटेल्स ईमेल/व्हाट्सएप पर भेजी जा सकेंगी।
      </div>
    </div>

    <div id="step-4" class="step">
      <h4 style="margin:0 0 8px 0">Order placed</h4>
      <p class="small" id="final-msg">धन्यवाद — आपका ऑर्डर स्वीकार कर लिया गया है।</p>
      <div style="display:flex; gap:8px;">
        <button class="btn btn-primary" id="close-panel">Close</button>
      </div>
    </div>
  </div>

  <!-- Razorpay -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Your UPI VPA
    const UPI_VPA = '8955337410@ybl';
    const UPI_PAYEE_NAME = 'SECURETOOLS.IO';

    // Razorpay test key placeholder (unchanged)
    const RAZORPAY_TEST_KEY = 'rzp_test_XXXXXXXXXXXXXXXX';

    // UI wiring
    document.querySelectorAll('.services .btn-ghost').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const svc = e.target.getAttribute('data-service') || '';
        const price = e.target.getAttribute('data-price') || '';
        const sel = document.getElementById('service-select');
        for(let i=0;i<sel.options.length;i++){
          if(sel.options[i].text.toLowerCase().includes(svc.toLowerCase().split(' ')[0])){
            sel.selectedIndex = i;
            break;
          }
        }
        if(svc){ document.getElementById('selected-service').textContent = svc; }
        if(price){ document.getElementById('selected-price').textContent = '₹' + price; }
        openPanel();
      });
    });

    document.getElementById('open-panel').addEventListener('click', openPanel);
    document.getElementById('checkout-inline').addEventListener('click', openPanel);

    function openPanel(){ switchStep(1); document.querySelector('.panel').style.display='block'; }

    function switchStep(n){
      document.querySelectorAll('.panel .step').forEach(s=>s.classList.remove('active'));
      document.getElementById('step-'+n).classList.add('active');
    }

    document.getElementById('to-step-2').addEventListener('click', ()=>{
      const sel = document.getElementById('service-select').value;
      if(!sel){ alert('कृपया पहले सेवा चुनें।'); return; }
      switchStep(2);
    });
    document.getElementById('back-2').addEventListener('click', ()=>switchStep(1));
    document.getElementById('cancel-1').addEventListener('click', ()=>switchStep(1));

    document.getElementById('to-step-3').addEventListener('click', ()=>{
      const mob = document.getElementById('mobile').value.trim();
      if(!/^\d{10,13}$/.test(mob)){ alert('कृपया वैध मोबाइल नंबर डालें (numbers only).'); return; }
      const sel = document.getElementById('service-select').value.split('|');
      const svcName = sel[0] || '—';
      const amt = sel[1] ? ('₹'+sel[1]) : '₹0';
      document.getElementById('rev-service').textContent = svcName;
      document.getElementById('rev-amount').textContent = amt;
      document.getElementById('selected-service').textContent = svcName;
      document.getElementById('selected-price').textContent = amt;
      switchStep(3);
    });

    document.getElementById('back-3').addEventListener('click', ()=>switchStep(2));
    document.getElementById('close-panel').addEventListener('click', ()=>{ document.querySelector('.panel').style.display='none'; });

    // Razorpay flow (same as earlier)
    async function createOrderOnServer(payload){
      const res = await fetch('/create-order', {
        method: 'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if(!res.ok) throw new Error('Server error creating order');
      return res.json();
    }

    document.getElementById('pay-now-razor').addEventListener('click', async ()=>{
      try{
        const sel = document.getElementById('service-select').value.split('|');
        const svcName = sel[0] || 'Service';
        const amountINR = parseInt(sel[1] || '0', 10);
        if(amountINR <= 0) { alert('Invalid amount'); return; }
        const amountPaisa = amountINR * 100;
        const contact = document.getElementById('mobile').value.trim();

        const orderResp = await createOrderOnServer({
          amount: amountPaisa,
          currency: 'INR',
          receipt: 'rcpt_' + Date.now(),
          note: {service: svcName},
          contact
        });

        const options = {
          key: RAZORPAY_TEST_KEY,
          amount: orderResp.amount,
          currency: orderResp.currency,
          name: "SECURETOOLS.IO",
          description: svcName,
          order_id: orderResp.id,
          prefill: { contact: contact || '', name: '' },
          notes: {service: svcName},
          handler: async function (response){
            const verifyRes = await fetch('/verify-payment', {
              method:'POST',
              headers:{'Content-Type':'application/json'},
              body: JSON.stringify({ ...response, contact, service: svcName })
            });
            const body = await verifyRes.json();
            if(verifyRes.ok && body.success){
              alert('Payment सफल — धन्यवाद! Payment ID: ' + response.razorpay_payment_id);
              document.getElementById('final-msg').textContent = 'Payment सफल — Payment ID: ' + response.razorpay_payment_id;
              switchStep(4);
            } else {
              alert('Payment verification failed — कृपया संपर्क करें।');
            }
          },
          modal: { ondismiss: function(){ /* user closed */ } }
        };
        const rzp = new Razorpay(options);
        rzp.open();

      } catch(err){
        console.error(err);
        alert('Payment शुरू करने में समस्या: ' + err.message);
      }
    });

    // ----------------------------
    // Direct UPI logic
    // ----------------------------
    function buildUpiUri(vpa, name, amountINR, txnNote='Payment for SECURETOOLS.IO'){
      // UPI URI standard
      // pa => payee address (vpa), pn => payee name, am => amount, cu => INR, tn => note
      const am = amountINR ? amountINR.toString() : '';
      let uri = `upi://pay?pa=${encodeURIComponent(vpa)}&pn=${encodeURIComponent(name)}&cu=INR`;
      if(am) uri += `&am=${encodeURIComponent(am)}`;
      if(txnNote) uri += `&tn=${encodeURIComponent(txnNote)}`;
      return uri;
    }

    document.getElementById('open-upi-intent').addEventListener('click', ()=>{
      const sel = document.getElementById('service-select').value.split('|');
      const amountINR = parseInt(sel[1] || '0', 10);
      if(amountINR <= 0){ alert('Invalid amount'); return; }
      const upiUri = buildUpiUri(UPI_VPA, UPI_PAYEE_NAME, amountINR, 'Payment for ' + (sel[0] || 'service'));
      // show QR and UPI link
      document.getElementById('upi-qr-wrap').style.display = 'flex';
      document.getElementById('upi-link').value = upiUri;
      // Use Google Chart API to render QR (simple)
      document.getElementById('upi-qr').src = 'https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=' + encodeURIComponent(upiUri);
      // try to open UPI app via URI (this works on mobile)
      window.location.href = upiUri;
    });

    document.getElementById('copy-upi').addEventListener('click', ()=>{
      const txt = document.getElementById('upi-link').value;
      navigator.clipboard.writeText(txt).then(()=> alert('UPI link copied to clipboard'), ()=> alert('Copy failed'));
    });

    // "I have paid" -> open small prompt to submit txn id to server for manual verification
    document.getElementById('i-paid-upi').addEventListener('click', async ()=>{
      const txn = prompt('UPI transaction reference/UPI txn id डालें (आपके UPI app/Message में दिखेगा):');
      if(!txn) return;
      const sel = document.getElementById('service-select').value.split('|');
      const svcName = sel[0] || 'Service';
      const amountINR = parseInt(sel[1] || '0', 10);
      const contact = document.getElementById('mobile').value.trim();
      // send to server so you can verify manually later
      try{
        const res = await fetch('/confirm-upi-payment', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ vpa: UPI_VPA, txn_ref: txn, amount: amountINR*100, contact, service: svcName, receipt: 'rcpt_upi_' + Date.now() })
        });
        if(res.ok){
          alert('Thank you — हम आपकी पेमेंट रिपोर्ट प्राप्त कर चुके हैं। आप हमें कुछ समय में पेमेंट की पुष्टि के लिए संदेश भेज सकते हैं।');
          document.getElementById('final-msg').textContent = 'UPI payment report received — awaiting manual verification.';
          switchStep(4);
        } else {
          const body = await res.json();
          alert('Server error: ' + (body.error || 'unknown'));
        }
      }catch(err){
        console.error(err);
        alert('Submission failed: ' + err.message);
      }
    });

  </script>
</body>
</html>